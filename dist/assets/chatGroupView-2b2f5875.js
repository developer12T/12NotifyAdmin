import{_ as B,I as A,C as j,s as T,b as d,c as i,d as e,e as m,A as w,v as f,j as x,F as y,z as p,w as _,f as u,t as c,x as b,D as v,n as k}from"./index-adf0c14a.js";import{u as V}from"./user-f883db5e.js";const F={name:"ChatGroupView",components:{Icon:A},data(){return{currentRoom:{id:"",name:"",description:"",color:"#2196F3",members:[]},selectedUser:"",showUserDropdown:!1,userSearchQuery:"",userStore:V(),colorOptions:["#2196F3","#E91E63","#4CAF50","#FF9800","#9C27B0","#00BCD4","#F44336","#673AB7"],rooms:[],loading:!0,showCreateModal:!1,showEditModal:!1,showDeleteModal:!1,showMembersModal:!1,sortBy:"newest",selectedRoom:null,roomToDelete:null,newMemberId:"",searchQuery:"",mockRooms:[],chatStore:j(),editingRoomId:null,botUsers:{20250008:{employeeID:"20250008",fullNameThai:"Bot Notify",fullName:"Bot Notify",userName:"bot.notify",imgUrl:"/public/logo12.png",isBot:!0}},roomImageFile:null}},computed:{sortedRooms(){const l=[...this.rooms];switch(this.sortBy){case"newest":return l.sort((t,s)=>t.lastMessage?s.lastMessage?s.lastMessage.timestamp-t.lastMessage.timestamp:-1:1);case"oldest":return l.sort((t,s)=>t.lastMessage?s.lastMessage?t.lastMessage.timestamp-s.lastMessage.timestamp:-1:1);case"name":return l.sort((t,s)=>t.name.localeCompare(s.name,"th"));default:return l}},filteredActiveUsers(){const l=this.userStore.getActiveUsers();if(!this.userSearchQuery)return l;const t=this.userSearchQuery.toLowerCase().trim();return l.filter(s=>s.fullNameThai&&s.fullNameThai.toLowerCase().includes(t)||s.fullName&&s.fullName.toLowerCase().includes(t)||s.employeeID&&s.employeeID.toLowerCase().includes(t)||s.positon&&s.positon.toLowerCase().includes(t)||s.department&&s.department.toLowerCase().includes(t))},filteredRooms(){if(!this.searchQuery)return this.sortedRooms;const l=this.searchQuery.toLowerCase();return this.sortedRooms.filter(t=>t.name&&t.name.toLowerCase().includes(l)||t.description&&t.description.toLowerCase().includes(l))}},created(){this.fetchRooms(),this.fetchUsers()},methods:{async fetchUsers(){try{await this.userStore.fetchUsers()}catch(l){console.error("Error fetching users:",l)}},selectUser(l){this.selectedUser=l,this.showUserDropdown=!1,this.addSelectedUser()},handleImageError(l){l.target.src="/public/logo12.png"},addSelectedUser(){if(!this.selectedUser)return;if(this.currentRoom.members.find(s=>s.empId===this.selectedUser)){alert("ผู้ใช้นี้ถูกเลือกแล้ว"),this.selectedUser="";return}const t=this.userStore.getUserById(this.selectedUser);t&&(this.currentRoom.members.push({empId:t.employeeID,role:t.isBot?"bot":"User",fullName:t.fullNameThai||t.fullName,department:t.department,profileImage:t.imgUrl,isAdmin:!1,position:t.position}),this.selectedUser="")},async fetchRooms(){try{this.loading=!0;const l=await this.chatStore.getChatList();l&&l.data?this.rooms=l.data.map(t=>{var o;const s=t.admin||{},n=(o=t.members)==null?void 0:o.find(a=>a.role==="owner");return{id:t._id||t.id||String(t.room_id),name:t.name||t.room_name||"",description:t.description||"",color:t.color||"#007bff",imageUrl:t.imageUrl||"",admin:s.fullName||s.employeeID||"ไม่พบข้อมูล",owner:(n==null?void 0:n.fullName)||s.fullName||"ไม่พบข้อมูล",adminData:s,lastMessage:t.last_message||null,unreadCount:t.unread_count||0,members:t.members||[],totalMembers:t.totalMembers,createdAt:t.createdAt?new Date(t.createdAt).toLocaleDateString("th-TH"):"",updatedAt:t.updatedAt?new Date(t.updatedAt).toLocaleDateString("th-TH"):""}}):this.rooms=[],console.log("Processed rooms:",this.rooms)}catch(l){console.error("Error fetching rooms:",l),this.rooms=[]}finally{this.loading=!1}},openCreateModal(){this.currentRoom={name:"",description:"",color:"#007bff",members:[]},this.showCreateModal=!0},closeCreateModal(){this.showCreateModal=!1,this.currentRoom={name:"",description:"",color:"#007bff",members:[]}},async openEditModal(l){this.loading=!0;try{if(console.log("Opening edit modal for room:",l),!l.id)throw new Error("Room ID is undefined");this.editingRoomId=l.id;const t=await this.chatStore.getRoomById(l.id);if(t&&t.data){const s=t.data;console.log("Room data from API:",s),this.currentRoom={id:l.id,name:s.name||"",description:s.description||"",color:s.color||"#007bff",imageUrl:s.imageUrl||"",members:s.members.map(o=>({empId:o.employeeID,role:o.role,fullName:o.fullName,department:o.department,profileImage:o.profileImage,isAdmin:o.role==="admin"}))},!this.currentRoom.members.some(o=>o.role==="admin")&&s.admin&&this.currentRoom.members.unshift({empId:s.admin.employeeID,role:"admin",fullName:s.admin.fullName,department:s.admin.department,profileImage:s.admin.profileImage,isAdmin:!0}),console.log("Final currentRoom:",this.currentRoom)}else this.currentRoom={...l,id:l.id,members:l.members&&Array.isArray(l.members)?l.members.map(s=>({empId:s.employeeID||s.empId,role:s.role,fullName:s.fullName,department:s.department,profileImage:s.profileImage,isAdmin:s.role==="admin"})):[]};this.showEditModal=!0}catch(t){console.error("Error fetching room details:",t),alert("ไม่สามารถดึงข้อมูลห้องได้ กรุณาลองใหม่อีกครั้ง")}finally{this.loading=!1}},closeEditModal(){this.showEditModal=!1,this.editingRoomId=null,this.currentRoom={name:"",description:"",color:"#007bff",imageUrl:"",members:[]}},async createRoom(){try{if(this.loading=!0,this.currentRoom.members.length===0){alert("กรุณาเลือกผู้ใช้อย่างน้อย 1 คน"),this.loading=!1;return}if(!this.currentRoom.members.some(o=>o.role==="owner")){alert("กรุณากำหนดเจ้าของกลุ่มอย่างน้อย 1 คน"),this.loading=!1;return}const t=this.currentRoom.members.find(o=>o.role==="admin"),s=this.currentRoom.members.filter(o=>o.role!=="admin"),n=new FormData;n.append("name",this.currentRoom.name),n.append("description",this.currentRoom.description),n.append("color",this.currentRoom.color),this.roomImageFile&&n.append("image",this.roomImageFile),n.append("admin",JSON.stringify(t)),n.append("members",JSON.stringify(s)),await this.chatStore.createChat(n),this.closeCreateModal(),await this.fetchRooms(),alert("สร้างกลุ่มสำเร็จ")}catch(l){console.error("Error creating room:",l),alert("เกิดข้อผิดพลาดในการสร้างกลุ่ม กรุณาลองใหม่อีกครั้ง")}finally{this.loading=!1}},async updateRoom(){try{if(this.loading=!0,this.currentRoom.members.length===0){alert("กรุณาเลือกผู้ใช้อย่างน้อย 1 คน"),this.loading=!1;return}if(!this.editingRoomId||this.editingRoomId==="undefined"){alert("ไม่พบข้อมูลห้องที่ต้องการแก้ไข หรือ ID ไม่ถูกต้อง"),console.error("Invalid room ID:",this.editingRoomId),this.loading=!1;return}const l=this.currentRoom.members.find(a=>a.role==="admin"),t=this.currentRoom.members.filter(a=>a.role!=="admin");if(!l){alert("กรุณากำหนดผู้ดูแลกลุ่ม (admin) อย่างน้อย 1 คน"),this.loading=!1;return}if(!l.empId){console.error("Admin member object:",l),console.error("All members:",this.currentRoom.members),alert("ข้อมูล admin ไม่ครบถ้วน (ไม่มี empId)"),this.loading=!1;return}const s=new FormData;s.append("name",this.currentRoom.name),s.append("description",this.currentRoom.description),s.append("color",this.currentRoom.color),this.roomImageFile?s.append("image",this.roomImageFile):this.currentRoom.imageUrl&&s.append("imageUrl",this.currentRoom.imageUrl);const n=this.currentRoom.members.map(a=>({empId:a.empId,role:a.role,fullName:a.fullName,department:a.department,profileImage:a.profileImage}));s.append("members",JSON.stringify(n)),console.log("=== UPDATE ROOM DEBUG ==="),console.log("Current room members:",this.currentRoom.members),console.log("FormData contents:");for(let a of s.entries())console.log(a[0]+": "+a[1]);const o=await this.chatStore.updateRoom(this.editingRoomId,s);console.log("Update response:",o),this.closeEditModal(),await this.fetchRooms(),alert("อัพเดตกลุ่มสำเร็จ")}catch(l){console.error("Error updating room:",l),l.response&&console.error("Error response:",l.response.data),alert("เกิดข้อผิดพลาดในการอัพเดตกลุ่ม กรุณาลองใหม่อีกครั้ง")}finally{this.loading=!1}},confirmDelete(l){this.roomToDelete=l,this.showDeleteModal=!0},closeDeleteModal(){this.showDeleteModal=!1,this.roomToDelete=null},async deleteRoom(){var l;try{this.loading=!0;const t=((l=JSON.parse(localStorage.getItem("user")))==null?void 0:l.employeeID)||null,s=await this.chatStore.deleteRoom(this.roomToDelete.id,t);await new Promise(o=>setTimeout(o,1e3));const n=this.mockRooms.findIndex(o=>o.id===this.roomToDelete.id);n!==-1&&this.mockRooms.splice(n,1),this.closeDeleteModal(),this.fetchRooms()}catch(t){console.error("Error deleting room:",t)}},openMembersModal(l){this.selectedRoom=l,this.showMembersModal=!0},closeMembersModal(){this.showMembersModal=!1,this.selectedRoom=null,this.searchQuery=""},async addMember(l){try{await new Promise(t=>setTimeout(t,500)),this.selectedRoom.members.push(l),this.searchQuery=""}catch(t){console.error("Error adding member:",t)}},async removeMember(l){try{const t=this.currentRoom.members.find(s=>s.empId===l);if(t&&t.role==="bot"){alert("ไม่สามารถลบ Bot ออกจากกลุ่มได้");return}this.currentRoom.members=this.currentRoom.members.filter(s=>s.empId!==l)}catch(t){console.error("Error removing member:",t)}},getUserName(l){var n;const t=(n=this.currentRoom.members)==null?void 0:n.find(o=>o.empId===l);if(t)return t.fullName;const s=this.userStore.getUserById(l);return console.log("User data for",l,":",s),s&&(s.fullNameThai||s.fullName||s.name||s.username)||"ไม่พบข้อมูล"},getUserImage(l){var n;const t=(n=this.currentRoom.members)==null?void 0:n.find(o=>o.empId===l);if(t&&t.profileImage)return t.profileImage;const s=this.userStore.getUserById(l);return(s==null?void 0:s.imgUrl)||"/public/logo12.png"},isBotUser(l){var s;const t=(s=this.currentRoom.members)==null?void 0:s.find(n=>n.empId===l);return(t==null?void 0:t.role)==="bot"},onRoomImageChange(l){const t=l.target.files[0];this.roomImageFile=t||null}}},z={class:"p-4 sm:ml-32"},Q={class:"p-4 mt-14"},L={class:"flex justify-between items-center mb-6"},O={class:"flex items-start justify-between gap-2"},q=e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"จัดการกลุ่มแชท",-1),P=e("option",{value:"newest"},"ใหม่ล่าสุด",-1),G=e("option",{value:"oldest"},"เก่าสุด",-1),H=e("option",{value:"name"},"ตามชื่อกลุ่ม",-1),J=[P,G,H],Z={class:"flex justify-center px-1"},K={class:"max-w-md mx-auto"},W=e("label",{for:"default-search",class:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white"},"Search",-1),X={class:"relative"},Y=e("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})])],-1),$=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M21 6h-2v6.1c1.2.2 2.2.7 3 1.4V7c0-.5-.5-1-1-1M6 17c0 .5.5 1 1 1h5c0-1.1.3-2.1.8-3H6zM16 2H3c-.5 0-1 .5-1 1v14l4-4h8.7c.7-.5 1.5-.8 2.3-.9V3c0-.5-.5-1-1-1m1 12h2v3h3v2h-3v3h-2v-3h-3v-2h3z"})],-1),ee={key:0,class:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-[9999] flex items-center justify-center"},te=e("div",{class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl flex flex-col items-center min-w-[200px]"},[e("div",{class:"animate-spin rounded-full h-10 w-10 border-4 border-blue-600 border-t-transparent mb-3"}),e("p",{class:"text-gray-700 dark:text-gray-300 font-medium"},"กำลังโหลด...")],-1),re=[te],oe={key:1,class:"text-center py-12"},se=e("i",{class:"fas fa-users text-4xl text-gray-400 mb-4"},null,-1),le=e("p",{class:"text-gray-500 dark:text-gray-400"},"ยังไม่มีกลุ่มแชท",-1),ae=[se,le],de={key:2,class:"relative overflow-x-auto overflow-y-auto h-[70vh] shadow-md sm:rounded-lg"},ie={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},ne=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 sticky top-0 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"ชื่อกลุ่ม"),e("th",{scope:"col",class:"px-6 py-3"},"คำอธิบาย"),e("th",{scope:"col",class:"px-6 py-3"},"ผู้ดูแล"),e("th",{scope:"col",class:"px-6 py-3"},"เจ้าของ"),e("th",{scope:"col",class:"px-1 py-3"},"จำนวนสมาชิก"),e("th",{scope:"col",class:"px-1 py-3 text-center"},"วันที่สร้าง"),e("th",{scope:"col",class:"px-1 py-3 text-center"},"อัพเดตล่าสุด"),e("th",{scope:"col",class:"px-6 py-3"},"จัดการ")])],-1),ce={class:"px-6 py-4"},ge={class:"flex items-center gap-2"},ue=["onClick"],me={class:"px-6 py-4"},he=["onClick"],be={class:"px-6 py-4"},ye={class:"px-6 py-4"},pe={class:"px-6 py-4 text-right"},fe={class:"inline-flex items-center gap-1"},xe={class:"px-6 py-4 text-right"},_e={class:"inline-flex items-center gap-1"},ke={class:"px-6 py-4 text-right"},we={class:"inline-flex items-center gap-1"},ve={class:"px-6 py-4"},Ue={class:"flex gap-2"},Re=["onClick"],Ie=["onClick"],Ce={key:3,class:"fixed inset-0 bg-gray-900 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Me={class:"relative max-w-4xl max-h-full top-20 mx-auto p-5 border shadow-lg rounded-md bg-white dark:bg-gray-800"},De={class:"flex justify-between items-center mb-4"},Se=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," สร้างกลุ่มใหม่ ",-1),Ee=e("i",{class:"fas fa-times"},null,-1),Ne=[Ee],Be={class:"flex flex-row justify-between gap-4"},Ae={class:"w-1/3"},je={class:"mb-4"},Te=e("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"ชื่อกลุ่ม",-1),Ve={class:"mb-4"},Fe=e("label",{for:"description",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"คำอธิบาย",-1),ze={class:"mb-4"},Qe=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",for:"small_size"},"รูปภาพกลุ่ม",-1),Le={class:"mb-4"},Oe=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"สีกลุ่ม",-1),qe={class:"flex flex-wrap gap-2"},Pe=["onClick"],Ge={class:"w-2/3"},He={class:"mb-4"},Je=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"ผู้ใช้งาน",-1),Ze={class:"flex flex-wrap gap-2 relative"},Ke={class:"flex items-center justify-between"},We={class:"flex items-center gap-2"},Xe=["src"],Ye={key:1},$e={key:2},et={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 max-h-60 overflow-y-auto dark:bg-gray-700 dark:border-gray-600"},tt={class:"sticky top-0 p-2 bg-white dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"},rt={class:"relative"},ot={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},st=["onClick"],lt=["src"],at={class:"text-gray-900 dark:text-white"},dt={key:0,class:"text-gray-500 text-xs"},it={class:"text-gray-500"},nt={class:"text-gray-500 dark:text-gray-400 text-xs"},ct={class:"mb-4"},gt=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"ผู้ใช้ที่เลือก",-1),ut={class:"relative overflow-x-auto overflow-y-auto h-[250px]"},mt={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},ht=e("thead",{class:"text-xs text-gray-700 sticky top-0 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," ชื่อผู้ใช้ "),e("th",{scope:"col",class:"px-6 py-3"}," สิทธิ์ "),e("th",{scope:"col",class:"px-6 py-3"})])],-1),bt={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},yt={class:"flex items-center gap-2"},pt=["src"],ft={class:"flex items-center gap-2"},xt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},_t={class:"px-6 py-4"},kt=["onUpdate:modelValue","disabled"],wt=e("option",{value:"owner"},"เจ้าของ",-1),vt=e("option",{value:"admin"},"ผู้ดูแล",-1),Ut=e("option",{value:"User"},"สมาชิก",-1),Rt=e("option",{value:"bot"},"Bot",-1),It=[wt,vt,Ut,Rt],Ct={class:"px-6 py-4"},Mt=["onClick"],Dt={key:0,class:"bg-white dark:bg-gray-800"},St=e("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500 dark:text-gray-400"}," ยังไม่มีผู้ใช้ที่เลือก ",-1),Et=[St],Nt={class:"flex justify-end space-x-2"},Bt=e("button",{type:"submit",class:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-green-600 dark:hover:bg-green-700 focus:outline-none dark:focus:ring-green-800"}," สร้าง ",-1),At={key:4,class:"fixed inset-0 bg-gray-900 bg-opacity-50 overflow-y-auto h-full w-full z-50"},jt={class:"relative top-10 mx-auto p-5 border max-w-7xl max-h-full shadow-lg rounded-md bg-white dark:bg-gray-800"},Tt={class:"flex justify-between items-center mb-4"},Vt=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," แก้ไขกลุ่ม ",-1),Ft=e("i",{class:"fas fa-times"},null,-1),zt=[Ft],Qt={class:"flex flex-row gap-4 justify-between"},Lt={class:"w-1/2"},Ot={class:"mb-4"},qt=e("label",{for:"edit-name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"ชื่อกลุ่ม",-1),Pt={class:"mb-4"},Gt=e("label",{for:"edit-description",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"คำอธิบาย",-1),Ht={class:"mb-4"},Jt=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",for:"edit-room-image"},"รูปภาพกลุ่ม",-1),Zt={key:0,class:"mt-2"},Kt=["src"],Wt=e("p",{class:"text-xs text-gray-500 mt-1"},"รูปภาพปัจจุบัน",-1),Xt={class:"mb-4"},Yt=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"สีกลุ่ม",-1),$t={class:"flex flex-wrap gap-2"},er=["onClick"],tr={class:"w-1/2"},rr={class:"mb-4"},or=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"ผู้ใช้งาน",-1),sr={class:"flex flex-wrap gap-2 relative"},lr={class:"flex items-center justify-between"},ar={class:"flex items-center gap-2"},dr=["src"],ir={key:1},nr={key:2},cr={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 max-h-60 overflow-y-auto dark:bg-gray-700 dark:border-gray-600"},gr={class:"sticky top-0 p-2 bg-white dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"},ur={class:"relative"},mr={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},hr=["onClick"],br=["src"],yr={class:"text-gray-900 dark:text-white"},pr={key:0,class:"text-gray-500 text-xs"},fr={class:"text-gray-500"},xr={class:"text-gray-500 dark:text-gray-400 text-xs"},_r={class:"mb-4"},kr=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"ผู้ใช้ที่เลือก",-1),wr={class:"relative overflow-x-auto overflow-y-auto h-[250px]"},vr={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},Ur=e("thead",{class:"text-xs sticky top-0 text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," ชื่อผู้ใช้ "),e("th",{scope:"col",class:"px-6 py-3"}," สิทธิ์ "),e("th",{scope:"col",class:"px-6 py-3"})])],-1),Rr={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Ir={class:"flex items-center gap-2"},Cr=["src"],Mr={class:"flex items-center gap-2"},Dr={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},Sr={class:"px-6 py-4"},Er=["onUpdate:modelValue","disabled"],Nr=e("option",{value:"owner"},"เจ้าของ",-1),Br=e("option",{value:"admin"},"ผู้ดูแล",-1),Ar=e("option",{value:"User"},"สมาชิก",-1),jr=e("option",{value:"bot"},"Bot",-1),Tr=[Nr,Br,Ar,jr],Vr={class:"px-6 py-4"},Fr=["onClick"],zr={key:0,class:"bg-white dark:bg-gray-800"},Qr=e("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500 dark:text-gray-400"}," ยังไม่มีผู้ใช้ที่เลือก ",-1),Lr=[Qr],Or={class:"flex justify-end space-x-2"},qr=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"}," บันทึก ",-1),Pr={key:5,class:"fixed inset-0 bg-gray-900 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Gr={class:"relative top-20 mx-auto p-5 border w-[600px] shadow-lg rounded-md bg-white dark:bg-gray-800"},Hr={class:"flex justify-between items-center mb-4"},Jr={class:"text-lg font-medium text-gray-900 dark:text-white"},Zr=e("i",{class:"fas fa-times"},null,-1),Kr=[Zr],Wr={class:"mb-4"},Xr={class:"relative"},Yr=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("i",{class:"fas fa-search text-gray-500 dark:text-gray-400"})],-1),$r={key:0,class:"mb-4"},eo=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ผลการค้นหา",-1),to={class:"space-y-2"},ro={class:"text-gray-700 dark:text-gray-300"},oo=["onClick"],so=e("i",{class:"fas fa-plus"},null,-1),lo=[so],ao=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"สมาชิกปัจจุบัน",-1),io={class:"space-y-2"},no={class:"flex items-center gap-2"},co={class:"text-gray-700 dark:text-gray-300"},go={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},uo=["onClick"],mo=e("i",{class:"fas fa-times"},null,-1),ho=[mo],bo={key:6,class:"fixed inset-0 bg-gray-900 bg-opacity-50 overflow-y-auto h-full w-full z-50"},yo={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800"},po={class:"mt-3 text-center"},fo=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 dark:text-red-300"})],-1),xo=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mt-4"},"ยืนยันการลบ",-1),_o={class:"mt-2 px-7 py-3"},ko={class:"text-sm text-gray-500 dark:text-gray-400"},wo={class:"flex justify-center space-x-2 mt-4"};function vo(l,t,s,n,o,a){var U,R,I,C,M,D,S,E,N;const h=T("Icon");return d(),i("div",z,[e("div",Q,[e("div",L,[e("div",O,[q,m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.sortBy=r),class:"input-equal-height bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full md:w-auto p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},J,512),[[w,o.sortBy]]),e("div",Z,[e("form",K,[W,e("div",X,[Y,m(e("input",{type:"search",id:"default-search","onUpdate:modelValue":t[1]||(t[1]=r=>o.searchQuery=r),class:"input-equal-height block w-full p-2.5 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"ค้นหาประกาศ..."},null,512),[[f,o.searchQuery]])])])])]),e("button",{onClick:t[2]||(t[2]=(...r)=>a.openCreateModal&&a.openCreateModal(...r)),class:"text-white bg-green-700 hover:bg-green-800 flex items-center gap-2 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-green-600 dark:hover:bg-green-700 focus:outline-none dark:focus:ring-green-800"},[$,x("สร้างกลุ่มใหม่ ")])]),o.loading?(d(),i("div",ee,re)):o.rooms.length===0?(d(),i("div",oe,ae)):(d(),i("div",de,[e("table",ie,[ne,e("tbody",null,[(d(!0),i(y,null,p(a.filteredRooms,r=>(d(),i("tr",{key:r.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[e("td",ce,[e("div",ge,[e("div",{class:"w-3 h-3 rounded-full",style:v({backgroundColor:r.color})},null,4),e("span",{class:"font-medium text-gray-900 dark:text-white cursor-pointer",onClick:g=>a.openEditModal(r)},c(r.name),9,ue)])]),e("td",me,[e("span",{class:"cursor-pointer",onClick:g=>a.openEditModal(r)},c(r.description),9,he)]),e("td",be,c(r.admin),1),e("td",ye,c(r.owner),1),e("td",pe,[e("span",fe,c(r.totalMembers),1)]),e("td",xe,[e("span",_e,c(r.createdAt),1)]),e("td",ke,[e("span",we,c(r.updatedAt),1)]),e("td",ve,[e("div",Ue,[e("button",{onClick:g=>a.openEditModal(r),class:"text-[#00569D] hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"},[b(h,{icon:"mdi:pencil",width:"24",height:"24"})],8,Re),e("button",{onClick:g=>a.confirmDelete(r),class:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"},[b(h,{icon:"mdi:delete",width:"24",height:"24"})],8,Ie)])])]))),128))])])])),o.showCreateModal?(d(),i("div",Ce,[e("div",Me,[e("div",De,[Se,e("button",{onClick:t[3]||(t[3]=(...r)=>a.closeCreateModal&&a.closeCreateModal(...r)),class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"},Ne)]),e("form",{onSubmit:t[13]||(t[13]=_(r=>a.createRoom(),["prevent"]))},[e("div",Be,[e("div",Ae,[e("div",je,[Te,m(e("input",{type:"text",id:"name","onUpdate:modelValue":t[4]||(t[4]=r=>o.currentRoom.name=r),required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"กรอกชื่อกลุ่ม"},null,512),[[f,o.currentRoom.name]])]),e("div",Ve,[Fe,m(e("textarea",{id:"description","onUpdate:modelValue":t[5]||(t[5]=r=>o.currentRoom.description=r),required:"",rows:"4",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"กรอกคำอธิบายกลุ่ม"},null,512),[[f,o.currentRoom.description]])]),e("div",ze,[Qe,e("input",{class:"block w-full mb-5 text-xs text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",onChange:t[6]||(t[6]=(...r)=>a.onRoomImageChange&&a.onRoomImageChange(...r)),accept:"image/*",id:"small_size",type:"file"},null,32)]),e("div",Le,[Oe,e("div",qe,[(d(!0),i(y,null,p(o.colorOptions,r=>(d(),i("div",{key:r,style:v({backgroundColor:r}),class:k(["w-8 h-8 rounded-full cursor-pointer border-2 transition",o.currentRoom.color===r?"border-blue ring-2 ring-blue":"border-gray-300"]),onClick:g=>o.currentRoom.color=r},null,14,Pe))),128))])])]),e("div",Ge,[e("div",He,[Je,e("div",Ze,[e("div",{class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 cursor-pointer",onClick:t[7]||(t[7]=r=>o.showUserDropdown=!o.showUserDropdown)},[e("div",Ke,[e("div",We,[o.selectedUser&&((U=o.userStore.getUserById(o.selectedUser))!=null&&U.imgUrl)?(d(),i("img",{key:0,src:(R=o.userStore.getUserById(o.selectedUser))==null?void 0:R.imgUrl,class:"w-6 h-6 rounded-full object-cover",alt:"User profile"},null,8,Xe)):u("",!0),o.selectedUser?(d(),i("span",Ye,c(((I=o.userStore.getUserById(o.selectedUser))==null?void 0:I.fullNameThai)||"ไม่พบข้อมูล")+" ("+c(o.selectedUser)+") ",1)):(d(),i("span",$e,"เลือกผู้ใช้งาน"))]),b(h,{icon:"mdi:chevron-down",width:"20",height:"20"})])]),o.showUserDropdown?(d(),i("div",et,[e("div",tt,[e("div",rt,[e("div",ot,[b(h,{icon:"mdi:magnify",class:"text-gray-500 dark:text-gray-400",width:"20",height:"20"})]),m(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=r=>o.userSearchQuery=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"ค้นหาผู้ใช้...",onClick:t[9]||(t[9]=_(()=>{},["stop"]))},null,512),[[f,o.userSearchQuery]])])]),(d(!0),i(y,null,p(a.filteredActiveUsers,r=>(d(),i("div",{key:r.employeeID,onClick:g=>a.selectUser(r.employeeID),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer flex items-center gap-2"},[e("img",{src:r.imgUrl,class:"w-8 h-8 rounded-full object-cover",alt:"User profile",onError:t[10]||(t[10]=(...g)=>a.handleImageError&&a.handleImageError(...g))},null,40,lt),e("div",null,[e("div",at,[x(c(r.fullNameThai)+" ",1),r.positon?(d(),i("span",dt,[x(c(r.positon)+" ",1),e("span",it,": "+c(r.department),1)])):u("",!0)]),e("div",nt,c(r.employeeID),1)])],8,st))),128))])):u("",!0)])]),e("div",ct,[gt,e("div",ut,[e("table",mt,[ht,e("tbody",null,[(d(!0),i(y,null,p(o.currentRoom.members,r=>(d(),i("tr",{key:r.empId,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200"},[e("th",bt,[e("div",yt,[e("img",{src:a.getUserImage(r.empId),class:"w-8 h-8 rounded-full object-cover",alt:"User profile",onError:t[11]||(t[11]=(...g)=>a.handleImageError&&a.handleImageError(...g))},null,40,pt),e("div",ft,[e("span",null,c(a.getUserName(r.empId)),1),r.role==="bot"?(d(),i("span",xt,[b(h,{icon:"mdi:robot",class:"mr-1",width:"16",height:"16"}),x(" Bot ")])):u("",!0)])])]),e("td",_t,[m(e("select",{"onUpdate:modelValue":g=>r.role=g,disabled:r.role==="bot",class:k(["bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",{"opacity-50 cursor-not-allowed":r.role==="bot"}])},It,10,kt),[[w,r.role]])]),e("td",Ct,[r.role!=="bot"?(d(),i("button",{key:0,onClick:g=>a.removeMember(r.empId),class:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"},[b(h,{icon:"mdi:delete",width:"24",height:"24"})],8,Mt)):u("",!0)])]))),128)),o.currentRoom.members.length===0?(d(),i("tr",Dt,Et)):u("",!0)])])])])])]),e("div",Nt,[e("button",{type:"button",onClick:t[12]||(t[12]=(...r)=>a.closeCreateModal&&a.closeCreateModal(...r)),class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," ยกเลิก "),Bt])],32)])])):u("",!0),o.showEditModal?(d(),i("div",At,[e("div",jt,[e("div",Tt,[Vt,e("button",{onClick:t[14]||(t[14]=(...r)=>a.closeEditModal&&a.closeEditModal(...r)),class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"},zt)]),e("form",{onSubmit:t[24]||(t[24]=_(r=>a.updateRoom(),["prevent"]))},[e("div",Qt,[e("div",Lt,[e("div",Ot,[qt,m(e("input",{type:"text",id:"edit-name","onUpdate:modelValue":t[15]||(t[15]=r=>o.currentRoom.name=r),required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"กรอกชื่อกลุ่ม"},null,512),[[f,o.currentRoom.name]])]),e("div",Pt,[Gt,m(e("textarea",{id:"edit-description","onUpdate:modelValue":t[16]||(t[16]=r=>o.currentRoom.description=r),required:"",rows:"4",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"กรอกคำอธิบายกลุ่ม"},null,512),[[f,o.currentRoom.description]])]),e("div",Ht,[Jt,e("input",{class:"block w-full mb-5 text-xs text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",onChange:t[17]||(t[17]=(...r)=>a.onRoomImageChange&&a.onRoomImageChange(...r)),accept:"image/*",id:"edit-room-image",type:"file"},null,32),o.currentRoom.imageUrl?(d(),i("div",Zt,[e("img",{src:o.currentRoom.imageUrl,alt:"Current room image",class:"w-20 h-20 object-cover rounded-lg"},null,8,Kt),Wt])):u("",!0)]),e("div",Xt,[Yt,e("div",$t,[(d(!0),i(y,null,p(o.colorOptions,r=>(d(),i("div",{key:r,style:v({backgroundColor:r}),class:k(["w-8 h-8 rounded-full cursor-pointer border-2 transition",o.currentRoom.color===r?"border-blue ring-2 ring-blue":"border-gray-300"]),onClick:g=>o.currentRoom.color=r},null,14,er))),128))])])]),e("div",tr,[e("div",rr,[or,e("div",sr,[e("div",{class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 cursor-pointer",onClick:t[18]||(t[18]=r=>o.showUserDropdown=!o.showUserDropdown)},[e("div",lr,[e("div",ar,[o.selectedUser&&((C=o.userStore.getUserById(o.selectedUser))!=null&&C.imgUrl)?(d(),i("img",{key:0,src:(M=o.userStore.getUserById(o.selectedUser))==null?void 0:M.imgUrl,class:"w-6 h-6 rounded-full object-cover",alt:"User profile"},null,8,dr)):u("",!0),o.selectedUser?(d(),i("span",ir,c(((D=o.userStore.getUserById(o.selectedUser))==null?void 0:D.fullNameThai)||"ไม่พบข้อมูล")+" ("+c(o.selectedUser)+") ",1)):(d(),i("span",nr,"เลือกผู้ใช้งาน"))]),b(h,{icon:"mdi:chevron-down",width:"20",height:"20"})])]),o.showUserDropdown?(d(),i("div",cr,[e("div",gr,[e("div",ur,[e("div",mr,[b(h,{icon:"mdi:magnify",class:"text-gray-500 dark:text-gray-400",width:"20",height:"20"})]),m(e("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=r=>o.userSearchQuery=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"ค้นหาผู้ใช้...",onClick:t[20]||(t[20]=_(()=>{},["stop"]))},null,512),[[f,o.userSearchQuery]])])]),(d(!0),i(y,null,p(a.filteredActiveUsers,r=>(d(),i("div",{key:r.employeeID,onClick:g=>a.selectUser(r.employeeID),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer flex items-center gap-2"},[e("img",{src:r.imgUrl,class:"w-8 h-8 rounded-full object-cover",alt:"User profile",onError:t[21]||(t[21]=(...g)=>a.handleImageError&&a.handleImageError(...g))},null,40,br),e("div",null,[e("div",yr,[x(c(r.fullNameThai)+" ",1),r.positon?(d(),i("span",pr,[x(c(r.positon)+" ",1),e("span",fr,": "+c(r.department),1)])):u("",!0)]),e("div",xr,c(r.employeeID),1)])],8,hr))),128))])):u("",!0)])]),e("div",_r,[kr,e("div",wr,[e("table",vr,[Ur,e("tbody",null,[(d(!0),i(y,null,p(o.currentRoom.members,r=>(d(),i("tr",{key:r.empId,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200"},[e("th",Rr,[e("div",Ir,[e("img",{src:a.getUserImage(r.empId),class:"w-8 h-8 rounded-full object-cover",alt:"User profile",onError:t[22]||(t[22]=(...g)=>a.handleImageError&&a.handleImageError(...g))},null,40,Cr),e("div",Mr,[e("span",null,c(a.getUserName(r.empId)),1),r.role==="bot"?(d(),i("span",Dr,[b(h,{icon:"mdi:robot",class:"mr-1",width:"16",height:"16"}),x(" Bot ")])):u("",!0)])])]),e("td",Sr,[m(e("select",{"onUpdate:modelValue":g=>r.role=g,disabled:r.role==="bot",class:k(["bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",{"opacity-50 cursor-not-allowed":r.role==="bot"}])},Tr,10,Er),[[w,r.role]])]),e("td",Vr,[r.role!=="bot"?(d(),i("button",{key:0,onClick:g=>a.removeMember(r.empId),class:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"},[b(h,{icon:"mdi:delete",width:"24",height:"24"})],8,Fr)):u("",!0)])]))),128)),o.currentRoom.members.length===0?(d(),i("tr",zr,Lr)):u("",!0)])])])])])]),e("div",Or,[e("button",{type:"button",onClick:t[23]||(t[23]=(...r)=>a.closeEditModal&&a.closeEditModal(...r)),class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," ยกเลิก "),qr])],32)])])):u("",!0),o.showMembersModal?(d(),i("div",Pr,[e("div",Gr,[e("div",Hr,[e("h3",Jr,' จัดการสมาชิกกลุ่ม "'+c((S=o.selectedRoom)==null?void 0:S.name)+'" ',1),e("button",{onClick:t[25]||(t[25]=(...r)=>a.closeMembersModal&&a.closeMembersModal(...r)),class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"},Kr)]),e("div",Wr,[e("div",Xr,[Yr,m(e("input",{type:"text","onUpdate:modelValue":t[26]||(t[26]=r=>o.searchQuery=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"ค้นหาผู้ใช้..."},null,512),[[f,o.searchQuery]])])]),o.searchQuery&&l.filteredUsers.length>0?(d(),i("div",$r,[eo,e("div",to,[(d(!0),i(y,null,p(l.filteredUsers,r=>(d(),i("div",{key:r.id,class:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("span",ro,c(r.username),1),e("button",{onClick:g=>a.addMember(r),class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"},lo,8,oo)]))),128))])])):u("",!0),e("div",null,[ao,e("div",io,[(d(!0),i(y,null,p((E=o.selectedRoom)==null?void 0:E.members,r=>(d(),i("div",{key:r.id,class:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",no,[e("span",co,c(r.username),1),r.id===o.selectedRoom.admin?(d(),i("span",go," ผู้ดูแล ")):u("",!0)]),r.id!==o.selectedRoom.admin?(d(),i("button",{key:0,onClick:g=>a.removeMember(r.id),class:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"},ho,8,uo)):u("",!0)]))),128))])])])])):u("",!0),o.showDeleteModal?(d(),i("div",bo,[e("div",yo,[e("div",po,[fo,xo,e("div",_o,[e("p",ko,' คุณต้องการลบกลุ่ม "'+c((N=o.roomToDelete)==null?void 0:N.name)+'" ใช่หรือไม่? ',1)]),e("div",wo,[e("button",{onClick:t[27]||(t[27]=(...r)=>a.closeDeleteModal&&a.closeDeleteModal(...r)),class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," ยกเลิก "),e("button",{onClick:t[28]||(t[28]=(...r)=>a.deleteRoom&&a.deleteRoom(...r)),class:"text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-red-600 dark:hover:bg-red-700 focus:outline-none dark:focus:ring-red-800"}," ลบ ")])])])])):u("",!0)])])}const Io=B(F,[["render",vo]]);export{Io as default};
