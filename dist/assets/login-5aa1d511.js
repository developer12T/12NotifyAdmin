import{_,r as n,u as L,a as S,o as I,b as u,c as g,d as e,w as E,e as b,v as y,n as x,t as w,f as h,S as k,p as N,g as U,h as V,i as v}from"./index-0a453887.js";const B={components:{},setup(){const t=n(""),o=n(""),d=n(""),r=n(""),m=n(!1),l=L(),s=S();I(()=>{s.isLoggedIn&&l.push("/dashboard")});const p=()=>{t.value?d.value="":d.value="กรุณากรอกชื่อผู้ใช้งาน"},f=()=>{o.value?r.value="":r.value="กรุณากรอกรหัสผ่าน"};return{userLogin:t,passwordLogin:o,userLoginError:d,passwordError:r,showError:m,SignIn:async()=>{if(p(),f(),!(d.value||r.value))try{const a=await s.login(t.value,o.value);if(a.status===200&&a.data&&a.data[0]){const c=a.data[0];localStorage.setItem("user",JSON.stringify(c)),localStorage.setItem("token",JSON.stringify(a.token)),await k.fire({icon:"success",title:"เข้าสู่ระบบสำเร็จ",text:`ยินดีต้อนรับ ${c.fullNameThai||c.fullName}`,timer:1500,showConfirmButton:!1}),await l.push("/dashboard")}else throw new Error("เข้าสู่ระบบไม่สำเร็จ")}catch(a){console.error("Login error:",a),k.fire({icon:"error",title:"เข้าสู่ระบบไม่สำเร็จ",text:a.message||"รหัสผ่านหรือชื่อผู้ใช้งานผิด"})}},validateUserLogin:p,validatePassword:f}}},i=t=>(N("data-v-ce41415a"),t=t(),U(),t),D={class:"bg-gray-100 dark:bg-gray-900"},C={class:"flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0"},M={class:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700"},P=i(()=>e("div",{class:"flex justify-center"},[e("div",{class:"flex items-center"},[e("img",{class:"h-21 mr-2 sm:w-32 md:w-60",src:V,alt:"logo"})])],-1)),T={class:"p-6 space-y-4 md:space-y-6 sm:p-6",style:{"padding-top":"0%"}},j=i(()=>e("label",{for:"text",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[v("ชื่อผู้ใช้งาน "),e("span",{class:"text-red-500"},"*")],-1)),J={key:0,class:"mt-1 text-sm text-red-500"},O=i(()=>e("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[v("รหัสผ่าน "),e("span",{class:"text-red-500"},"*")],-1)),z={key:0,class:"mt-1 text-sm text-red-500"},A=i(()=>e("button",{style:{"border-radius":"12px","background-color":"#00569D"},type:"submit",class:"w-full text-white bg-blue-700 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-md text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"}," เข้าสู่ระบบ ",-1));function R(t,o,d,r,m,l){return u(),g("section",D,[e("div",C,[e("div",M,[P,e("div",T,[e("form",{class:"space-y-4 md:space-y-6",onSubmit:o[4]||(o[4]=E((...s)=>r.SignIn&&r.SignIn(...s),["prevent"])),method:"post"},[e("div",null,[j,b(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>r.userLogin=s),id:"userLogin",class:x(["bg-gray-50 border text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",r.userLoginError?"border-red-500":"border-gray-300"]),placeholder:"กรุณากรอกชื่อผู้ใช้งาน",onInput:o[1]||(o[1]=(...s)=>r.validateUserLogin&&r.validateUserLogin(...s))},null,34),[[y,r.userLogin]]),r.userLoginError?(u(),g("p",J,w(r.userLoginError),1)):h("",!0)]),e("div",null,[O,b(e("input",{type:"password","onUpdate:modelValue":o[2]||(o[2]=s=>r.passwordLogin=s),id:"passwordLogin",placeholder:"••••••••",class:x(["bg-gray-50 border text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",r.passwordError?"border-red-500":"border-gray-300"]),onInput:o[3]||(o[3]=(...s)=>r.validatePassword&&r.validatePassword(...s))},null,34),[[y,r.passwordLogin]]),r.passwordError?(u(),g("p",z,w(r.passwordError),1)):h("",!0)]),A],32)])])])])}const G=_(B,[["render",R],["__scopeId","data-v-ce41415a"]]);export{G as default};
