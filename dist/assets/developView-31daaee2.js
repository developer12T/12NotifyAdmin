import{_ as A,I as S,B as E,C as j,s as N,b as i,c as d,d as e,e as y,v as x,j as b,F as p,z as f,t as l,w as q,A as U,f as g,x as u,n as T,D as z}from"./index-6c1057aa.js";import{u as V}from"./user-14d15f4d.js";const L={name:"DevelopView",components:{Icon:S},data(){return{loading:!0,showModal:!1,showDeleteModal:!1,isEditing:!1,sortBy:"newest",searchQuery:"",currentRoom:{employeeID:"",name:"",roomCount:0,requestCount:0},roomToDelete:null,userStore:V(),botStore:E(),chatStore:j(),availableRooms:[],selectedRooms:[],selectedRoomId:"",showApiModal:!1,activeApiTab:"axios",currentBot:null,apiBaseUrl:"http://192.168.2.81/12chat",showDevNoticeModal:!1,showTestConfirmModal:!1,selectedBot:"",testMessage:"",rooms:[],bots:[]}},computed:{sortedRooms(){return[...this.rooms].sort((o,t)=>this.sortBy==="newest"?t.employeeID.localeCompare(o.employeeID):o.employeeID.localeCompare(t.employeeID))},filteredRooms(){if(!this.searchQuery)return this.sortedRooms;const o=this.searchQuery.toLowerCase().trim();return this.sortedRooms.filter(t=>t.name&&t.name.toLowerCase().includes(o)||t.employeeID&&t.employeeID.toLowerCase().includes(o))}},created(){this.fetchBots()},methods:{async fetchBots(){var o;try{this.loading=!0;const t=((o=JSON.parse(localStorage.getItem("user")))==null?void 0:o.employeeID)||null,n=await this.botStore.getBotList(t);n&&(this.rooms=n.map(c=>({employeeID:c.employeeID,name:c.name||c.name||"",roomCount:c.roomCount||0,requestCount:c.requestCount||0,createdAt:c.createdAt||new Date().toISOString()})))}catch(t){console.error("Error fetching bots:",t),this.rooms=[]}finally{this.loading=!1}},async fetchChatRooms(){try{const o=await this.chatStore.getChatList();this.availableRooms=o.data.map(t=>({_id:t._id,name:t.name,description:t.description,color:t.color,admin:t.admin,totalMembers:t.totalMembers,isActive:t.isActive,createdAt:t.createdAt,updatedAt:t.updatedAt}))}catch(o){console.error("Error fetching chat rooms:",o)}},addSelectedRoom(){if(!this.selectedRoomId)return;const o=this.availableRooms.find(t=>t._id===this.selectedRoomId);o&&!this.isRoomSelected(o._id)&&this.selectedRooms.push(o),this.selectedRoomId=""},removeSelectedRoom(o){this.selectedRooms=this.selectedRooms.filter(t=>t._id!==o._id)},isRoomSelected(o){return this.selectedRooms.some(t=>t._id===o)},openCreateModal(){this.isEditing=!1,this.currentRoom={employeeID:"",name:"",roomCount:0,requestCount:0},this.selectedRooms=[],this.fetchChatRooms(),this.showModal=!0},async openEditModal(o){try{this.loading=!0;const t=await this.botStore.getBotDetails(o.employeeID);this.isEditing=!0,this.currentRoom={employeeID:t.employeeID,name:t.botDetails.name,roomCount:t.botDetails.roomCount,requestCount:t.botDetails.requestCount,createdAt:t.botDetails.createdAt},t.rooms&&Array.isArray(t.rooms)?this.selectedRooms=t.rooms.map(n=>({_id:n.id,name:n.name,description:n.description,color:n.color,admin:n.admin,totalMembers:n.memberCount,createdAt:n.createdAt,updatedAt:n.updatedAt})):this.selectedRooms=[],await this.fetchChatRooms(),this.showModal=!0}catch(t){console.error("Error fetching bot details:",t),alert("เกิดข้อผิดพลาดในการดึงข้อมูล bot กรุณาลองใหม่อีกครั้ง")}finally{this.loading=!1}},closeModal(){this.showModal=!1,this.currentRoom={employeeID:"",name:"",roomCount:0,requestCount:0},this.selectedRooms=[],this.selectedRoomId=""},async createRoom(){var o;try{this.loading=!0;const t={name:this.currentRoom.name,roomCount:0,requestCount:0,createdBy:(o=JSON.parse(localStorage.getItem("user")))==null?void 0:o.employeeID,room:this.selectedRooms.map(c=>c._id)};console.log("Creating bot with data:",t),await this.botStore.createBot(t)&&(this.closeModal(),alert("สร้างบอทสำเร็จ"),await this.fetchBots(),this.sortBy=this.sortBy==="newest"?"oldest":"newest",await this.$nextTick(),this.sortBy=this.sortBy==="newest"?"oldest":"newest")}catch(t){console.error("Error creating bot:",t),alert("เกิดข้อผิดพลาดในการสร้าง bot กรุณาลองใหม่อีกครั้ง")}finally{this.loading=!1}},async updateRoom(){try{this.loading=!0;const o={employeeID:this.currentRoom.employeeID,name:this.currentRoom.name,requestCount:this.currentRoom.requestCount,rooms:this.selectedRooms};console.log("Updating bot with data:",o),await this.botStore.updateBot(this.currentRoom.employeeID,o)&&(this.closeModal(),alert("อัพเดทข้อมูลสำเร็จ"),await this.fetchBots(),this.sortBy=this.sortBy==="newest"?"oldest":"newest",await this.$nextTick(),this.sortBy=this.sortBy==="newest"?"oldest":"newest")}catch(o){console.error("Error updating bot:",o),alert("เกิดข้อผิดพลาดในการอัพเดต bot กรุณาลองใหม่อีกครั้ง")}finally{this.loading=!1}},confirmDelete(o){this.roomToDelete=o,this.showDeleteModal=!0},closeDeleteModal(){this.showDeleteModal=!1,this.roomToDelete=null},async deleteRoom(){try{this.loading=!0,await this.botStore.deleteBot(this.roomToDelete.employeeID)&&(this.closeDeleteModal(),alert("ลบบอทสำเร็จ"),await this.fetchBots(),this.sortBy=this.sortBy==="newest"?"oldest":"newest",await this.$nextTick(),this.sortBy=this.sortBy==="newest"?"oldest":"newest")}catch(o){console.error("Error deleting bot:",o),alert("เกิดข้อผิดพลาดในการลบ bot กรุณาลองใหม่อีกครั้ง")}finally{this.loading=!1}},formatDate(o){return o?new Date(o).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},async openApiModal(o){try{this.loading=!0;const t=await this.botStore.getBotDetails(o.employeeID);this.currentBot={...o,rooms:t.rooms||[]},this.showApiModal=!0}catch(t){console.error("Error fetching bot details:",t),alert("เกิดข้อผิดพลาดในการดึงข้อมูล bot กรุณาลองใหม่อีกครั้ง")}finally{this.loading=!1}},closeApiModal(){this.showApiModal=!1,this.currentBot=null,this.activeApiTab="axios"},showDevNotice(){this.showDevNoticeModal=!0},closeDevNotice(){this.showDevNoticeModal=!1},showTestMessageModal(){this.showTestMessageModal=!0},closeTestMessageModal(){this.showTestMessageModal=!1,this.selectedRoomId="",this.selectedBotId="",this.testMessage=""},async sendTestNotification(){try{if(!this.selectedRoomId||!this.selectedBotId||!this.testMessage){alert("กรุณากรอกข้อมูลให้ครบถ้วน");return}await this.chatStore.sendTestMessage(this.selectedRoomId,this.testMessage,this.selectedBotId,!0),alert("ส่งข้อความทดสอบสำเร็จ"),this.closeTestMessageModal()}catch(o){console.error("Error sending test notification:",o),alert("เกิดข้อผิดพลาดในการส่งข้อความทดสอบ")}},confirmTestMessage(o){this.selectedBot=o,this.testMessage=`ทดสอบจาก "${o.name}"`,this.showTestConfirmModal=!0},closeTestConfirmModal(){this.showTestConfirmModal=!1,this.selectedBot=null,this.testMessage=""},async sendTestMessage(){try{if(!this.testMessage.trim()){alert("กรุณากรอกข้อความ");return}this.loading=!0;const o=await this.botStore.getBotDetails(this.selectedBot.employeeID);if(!o.rooms||o.rooms.length===0){alert("Bot นี้ยังไม่มีห้องที่เชื่อมต่อ");return}const t=o.rooms[0].id;await this.chatStore.sendTestMessage(t,this.testMessage,this.selectedBot.employeeID,!0),alert("ส่งข้อความทดสอบสำเร็จ"),this.closeTestConfirmModal()}catch(o){console.error("Error sending test message:",o),alert("เกิดข้อผิดพลาดในการส่งข้อความทดสอบ")}finally{this.loading=!1}}}},P={class:"p-4 sm:ml-32"},O={class:"p-4 mt-14"},H={class:"flex justify-between items-center mb-6"},Q={class:"flex items-start justify-between gap-2"},F=e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"จัดการ Bot Notify",-1),J={class:"flex justify-center px-1"},G={class:"max-w-md mx-auto"},Z=e("label",{for:"default-search",class:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white"},"Search",-1),K={class:"relative"},W=e("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})])],-1),X=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 20 20"},[e("path",{fill:"currentColor",d:"M14.5 9q.207 0 .41.015q.088-.242.09-.515v-4A1.5 1.5 0 0 0 13.5 3h-3v-.5A.48.48 0 0 0 10 2c-.276 0-.5.23-.5.5V3h-3A1.5 1.5 0 0 0 5 4.5v4A1.5 1.5 0 0 0 6.5 10h4.837c.895-.63 1.986-1 3.163-1M7 6.5a1 1 0 1 1 2 0a1 1 0 0 1-2 0m4 0a1 1 0 1 1 2 0a1 1 0 0 1-2 0m-2 8c0-1.105.326-2.135.887-2.997H5.31a1.81 1.81 0 0 0-1.809 1.81v.689h.005c.034.78.248 1.757 1.123 2.555C5.584 17.43 7.234 18 10 18q.13 0 .256-.002A5.48 5.48 0 0 1 9 14.5m10 0a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-4-2a.5.5 0 0 0-1 0V14h-1.5a.5.5 0 0 0 0 1H14v1.5a.5.5 0 0 0 1 0V15h1.5a.5.5 0 0 0 0-1H15z"})],-1),Y={key:0,class:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-[9999] flex items-center justify-center"},$=e("div",{class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl flex flex-col items-center min-w-[200px]"},[e("div",{class:"animate-spin rounded-full h-10 w-10 border-4 border-blue-600 border-t-transparent mb-3"}),e("p",{class:"text-gray-700 dark:text-gray-300 font-medium"},"กำลังโหลด...")],-1),ee=[$],te={key:1,class:"text-center py-12"},se=e("i",{class:"fas fa-users text-4xl text-gray-400 mb-4"},null,-1),oe=e("p",{class:"text-gray-500 dark:text-gray-400"},"ยังไม่มีกลุ่มแชท",-1),re=[se,oe],ae={key:2,class:"relative overflow-x-auto overflow-y-auto h-[70vh] shadow-md sm:rounded-lg"},le={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},ie=e("thead",{class:"text-xs text-gray-700 uppercase sticky top-0 bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-2 py-3 text-center"},"ลำดับ"),e("th",{scope:"col",class:"px-2 py-3 text-center"},"รหัส"),e("th",{scope:"col",class:"px-6 py-3"},"ชื่อ Bot"),e("th",{scope:"col",class:"px-2 py-3 text-center"},"จำนวนห้อง"),e("th",{scope:"col",class:"px-2 py-3 text-center"},"จำนวน Request"),e("th",{scope:"col",class:"px-6 py-3 text-center"},"วันที่สร้าง"),e("th",{scope:"col",class:"px-6 py-3 text-center"},"จัดการ")])],-1),de={class:"px-6 py-4 text-center"},ne={class:"px-6 py-4 text-center"},ce={class:"px-6 py-4"},he=["onClick"],ge={class:"px-6 py-4 text-right"},ue={class:"inline-flex items-center gap-1"},me={class:"px-6 py-4 text-right"},ye={class:"inline-flex items-center gap-1"},xe=e("i",{class:"fas fa-bell text-gray-400"},null,-1),be={class:"px-6 py-4"},pe={class:"inline-flex items-center gap-1"},fe=e("i",{class:"fas fa-calendar text-gray-400"},null,-1),_e={class:"px-6 py-4"},ke={class:"flex justify-center gap-3"},ve=["onClick"],we=["onClick"],De=["onClick"],Ce=["onClick"],Me={key:3,class:"fixed inset-0 bg-gray-900 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Re={class:"relative top-20 mx-auto p-5 border w-[600px] shadow-lg rounded-md bg-white dark:bg-gray-800"},Be={class:"flex justify-between items-center mb-4"},Ie={class:"text-lg font-medium text-gray-900 dark:text-white"},Te=e("i",{class:"fas fa-times"},null,-1),Ae=[Te],Se={class:"mb-4"},Ee=e("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"ชื่อ Bot",-1),je=e("div",null,null,-1),Ne={class:"mb-4"},qe=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"รายการห้อง",-1),Ue={class:"relative"},ze=e("option",{value:""},"เลือกห้อง",-1),Ve=["value","disabled"],Le={class:"relative overflow-x-auto overflow-y-auto h-[250px]"},Pe={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},Oe=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 sticky top-0"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"ชื่อห้อง"),e("th",{scope:"col",class:"px-6 py-3"},"คำอธิบาย"),e("th",{scope:"col",class:"px-6 py-3"},"จัดการ")])],-1),He={class:"px-6 py-4"},Qe={class:"flex items-center gap-2"},Fe={class:"font-medium text-gray-900 text-sm dark:text-white"},Je={class:"px-6 py-4 text-xs"},Ge={class:"px-6 py-4"},Ze=["onClick"],Ke={key:0,class:"bg-white dark:bg-gray-800"},We=e("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500 dark:text-gray-400"}," ยังไม่มีห้องที่เลือก ",-1),Xe=[We],Ye={class:"flex justify-end space-x-2"},$e={type:"submit",class:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-green-600 dark:hover:bg-green-700 focus:outline-none dark:focus:ring-green-800"},et={key:4,class:"fixed inset-0 bg-gray-900 bg-opacity-50 overflow-y-auto h-full w-full z-50"},tt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800"},st={class:"mt-3 text-center"},ot=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 dark:text-red-300"})],-1),rt=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mt-4"},"ยืนยันการลบ",-1),at={class:"mt-2 px-7 py-3"},lt={class:"text-sm text-gray-500 dark:text-gray-400"},it={class:"flex justify-center space-x-2 mt-4"},dt={key:5,class:"fixed inset-0 bg-gray-900 bg-opacity-50 overflow-y-auto h-full w-full z-50"},nt={class:"relative top-20 mx-auto p-2.5 border w-[800px] shadow-lg rounded-md bg-white dark:bg-gray-800"},ct={class:"flex justify-between items-center mb-2"},ht={class:"text-md font-medium text-gray-900 dark:text-white"},gt={class:"border-b border-gray-200 dark:border-gray-700 mb-4"},ut={class:"flex flex-wrap -mb-px"},mt={class:"mr-2"},yt={class:"mr-2"},xt={class:"space-y-6"},bt={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},pt=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"},"API Endpoints",-1),ft={class:"space-y-2"},_t={class:"flex items-center gap-2"},kt=e("span",{class:"px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 rounded"},"POST",-1),vt={class:"text-sm text-gray-600 dark:text-gray-300"},wt={class:"flex items-center gap-2"},Dt=e("span",{class:"px-2 py-1 text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 rounded"},"GET",-1),Ct={class:"text-sm text-gray-600 dark:text-gray-300"},Mt={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg overflow-y-scroll h-[calc(100vh-500px)]"},Rt=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"},"Code Examples",-1),Bt={key:0,class:"space-y-4"},It=e("h5",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"},"ส่งข้อความ",-1),Tt={class:"bg-gray-800 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto"},At={key:1,class:"space-y-4"},St=e("h5",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"},"ส่งข้อความ",-1),Et={class:"bg-gray-800 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto"},jt={key:6,class:"fixed inset-0 bg-gray-900 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Nt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800"},qt={class:"mt-3 text-center"},Ut={class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900"},zt=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mt-4"},"อยู่ระหว่างการพัฒนา",-1),Vt=e("div",{class:"mt-2 px-7 py-3"},[e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," ฟีเจอร์ส่งข้อความกำลังอยู่ในขั้นตอนการพัฒนา กรุณารอการแจ้งเตือนในอนาคต ")],-1),Lt={class:"flex justify-center mt-4"},Pt={key:7,class:"fixed inset-0 bg-gray-900 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Ot={class:"relative top-20 mx-auto p-5 border w-[500px] shadow-lg rounded-md bg-white dark:bg-gray-800"},Ht={class:"mt-3 text-center"},Qt={class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900"},Ft=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mt-4"},"ยืนยันการส่งข้อความทดสอบ",-1),Jt={class:"mt-2 px-7 py-3"},Gt={class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},Zt={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-left"},Kt=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"ข้อความที่จะส่ง:",-1),Wt={class:"flex justify-center space-x-3 mt-6"};function Xt(o,t,n,c,r,a){var _,k,v,w,D,C,M,R,B;const h=N("Icon");return i(),d("div",P,[e("div",O,[e("div",H,[e("div",Q,[F,e("div",J,[e("form",G,[Z,e("div",K,[W,y(e("input",{type:"search",id:"default-search","onUpdate:modelValue":t[0]||(t[0]=s=>r.searchQuery=s),class:"input-equal-height block w-full ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"ค้นหาประกาศ..."},null,512),[[x,r.searchQuery]])])])])]),e("button",{onClick:t[1]||(t[1]=(...s)=>a.openCreateModal&&a.openCreateModal(...s)),class:"text-white bg-green-700 hover:bg-green-800 flex items-center gap-2 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-green-600 dark:hover:bg-green-700 focus:outline-none dark:focus:ring-green-800"},[X,b("สร้าง Bot Notify ")])]),r.loading?(i(),d("div",Y,ee)):r.rooms.length===0?(i(),d("div",te,re)):(i(),d("div",ae,[e("table",le,[ie,e("tbody",null,[(i(!0),d(p,null,f(a.filteredRooms,(s,I)=>(i(),d("tr",{key:s.employeeID,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[e("td",de,l(I+1),1),e("td",ne,l(s.employeeID),1),e("td",ce,[e("span",{class:"cursor-pointer",onClick:m=>a.openEditModal(s)},l(s.name),9,he)]),e("td",ge,[e("span",ue,l(s.roomCount),1)]),e("td",me,[e("span",ye,[xe,b(" "+l(s.requestCount),1)])]),e("td",be,[e("span",pe,[fe,b(" "+l(a.formatDate(s.createdAt)),1)])]),e("td",_e,[e("div",ke,[e("button",{onClick:m=>a.confirmTestMessage(s),class:"text-green-500 hover:text-green-800 dark:text-gray-400 dark:hover:text-gray-300"},[u(h,{icon:"streamline:send-email-solid",width:"20",height:"20"})],8,ve),e("button",{onClick:m=>a.openApiModal(s),class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300"},[u(h,{icon:"mingcute:code-fill",width:"24",height:"24"})],8,we),e("button",{onClick:m=>a.openEditModal(s),class:"text-[#00569D] hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"},[u(h,{icon:"mdi:pencil",width:"24",height:"24"})],8,De),e("button",{onClick:m=>a.confirmDelete(s),class:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"},[u(h,{icon:"mdi:delete",width:"24",height:"24"})],8,Ce)])])]))),128))])])])),r.showModal?(i(),d("div",Me,[e("div",Re,[e("div",Be,[e("h3",Ie,l(r.isEditing?"แก้ไข bot":"สร้าง Bot ใหม่"),1),e("button",{onClick:t[2]||(t[2]=(...s)=>a.closeModal&&a.closeModal(...s)),class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"},Ae)]),e("form",{onSubmit:t[7]||(t[7]=q(s=>r.isEditing?a.updateRoom():a.createRoom(),["prevent"]))},[e("div",null,[e("div",null,[e("div",Se,[Ee,y(e("input",{type:"text",id:"name","onUpdate:modelValue":t[3]||(t[3]=s=>r.currentRoom.name=s),required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"กรอกชื่อ bot"},null,512),[[x,r.currentRoom.name]])])]),je]),e("div",Ne,[qe,e("div",Ue,[y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.selectedRoomId=s),onChange:t[5]||(t[5]=(...s)=>a.addSelectedRoom&&a.addSelectedRoom(...s)),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 mb-4"},[ze,(i(!0),d(p,null,f(r.availableRooms,s=>(i(),d("option",{key:s._id,value:s._id,disabled:a.isRoomSelected(s._id)},l(s.name),9,Ve))),128))],544),[[U,r.selectedRoomId]]),e("div",Le,[e("table",Pe,[Oe,e("tbody",null,[(i(!0),d(p,null,f(r.selectedRooms,s=>(i(),d("tr",{key:s._id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200"},[e("td",He,[e("div",Qe,[e("div",{class:"w-3 h-3 rounded-full",style:z({backgroundColor:s.color})},null,4),e("span",Fe,l(s.name),1)])]),e("td",Je,l(s.description),1),e("td",Ge,[e("button",{onClick:I=>a.removeSelectedRoom(s),class:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"},[u(h,{icon:"mdi:delete",width:"24",height:"24"})],8,Ze)])]))),128)),r.selectedRooms.length===0?(i(),d("tr",Ke,Xe)):g("",!0)])])])])]),e("div",Ye,[e("button",{type:"button",onClick:t[6]||(t[6]=(...s)=>a.closeModal&&a.closeModal(...s)),class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," ยกเลิก "),e("button",$e,l(r.isEditing?"บันทึก":"สร้าง"),1)])],32)])])):g("",!0),r.showDeleteModal?(i(),d("div",et,[e("div",tt,[e("div",st,[ot,rt,e("div",at,[e("p",lt,' คุณต้องการลบ bot "'+l((_=r.roomToDelete)==null?void 0:_.name)+'" ใช่หรือไม่? ',1)]),e("div",it,[e("button",{onClick:t[8]||(t[8]=(...s)=>a.closeDeleteModal&&a.closeDeleteModal(...s)),class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," ยกเลิก "),e("button",{onClick:t[9]||(t[9]=(...s)=>a.deleteRoom&&a.deleteRoom(...s)),class:"text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-red-600 dark:hover:bg-red-700 focus:outline-none dark:focus:ring-red-800"}," ลบ ")])])])])):g("",!0),r.showApiModal?(i(),d("div",dt,[e("div",nt,[e("div",ct,[e("h3",ht," API Documentation - "+l((k=r.currentBot)==null?void 0:k.name),1),e("button",{onClick:t[10]||(t[10]=(...s)=>a.closeApiModal&&a.closeApiModal(...s)),class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"},[u(h,{icon:"mingcute:close-fill",width:"24",height:"24"})])]),e("div",gt,[e("ul",ut,[e("li",mt,[e("button",{onClick:t[11]||(t[11]=s=>r.activeApiTab="axios"),class:T(["inline-block p-4 border-b-2 rounded-t-lg",r.activeApiTab==="axios"?"text-blue-600 border-blue-600 dark:text-blue-500 dark:border-blue-500":"border-transparent hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300"])}," Axios ",2)]),e("li",yt,[e("button",{onClick:t[12]||(t[12]=s=>r.activeApiTab="php"),class:T(["inline-block p-4 border-b-2 rounded-t-lg",r.activeApiTab==="php"?"text-blue-600 border-blue-600 dark:text-blue-500 dark:border-blue-500":"border-transparent hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300"])}," PHP ",2)])])]),e("div",xt,[e("div",bt,[pt,e("div",ft,[e("div",_t,[kt,e("code",vt,l(r.apiBaseUrl)+"/api/messages/send",1)]),e("div",wt,[Dt,e("code",Ct,l(r.apiBaseUrl)+"/api/users/bot/:employeeID",1)])])]),e("div",Mt,[Rt,r.activeApiTab==="axios"?(i(),d("div",Bt,[e("div",null,[It,e("pre",Tt,[e("code",null,`const botData = {
  "roomId": [`+l(((w=(v=r.currentBot)==null?void 0:v.rooms)==null?void 0:w.map(s=>`"${s.id}"`).join(", "))||"")+`], // Room IDs ที่เชื่อมต่อกับ bot นี้
  "message": [ "ทดสอบการส่งข้อความ" ],
  "employeeId": "`+l((D=r.currentBot)==null?void 0:D.employeeID)+`",
  "isAdminNotification": true
};

const response = await axios.post('`+l(r.apiBaseUrl)+`/api/messages/send', botData, {
  headers: {
    'Content-Type': 'application/json'
  }
});`,1)])])])):g("",!0),r.activeApiTab==="php"?(i(),d("div",At,[e("div",null,[St,e("pre",Et,[e("code",null,`$botData = [
    'roomId' => [`+l(((M=(C=r.currentBot)==null?void 0:C.rooms)==null?void 0:M.map(s=>`"${s.id}"`).join(", "))||"")+`], // Room IDs ที่เชื่อมต่อกับ bot นี้
    'message' => [ "ทดสอบการส่งข้อความ" ],
    'employeeId' => '`+l((R=r.currentBot)==null?void 0:R.employeeID)+`',
    'isAdminNotification' => true
];

$ch = curl_init('`+l(r.apiBaseUrl)+`/api/messages/send');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($botData));
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Content-Type: application/json'
]);
$response = curl_exec($ch);
curl_close($ch);`,1)])])])):g("",!0)])])])])):g("",!0),r.showDevNoticeModal?(i(),d("div",jt,[e("div",Nt,[e("div",qt,[e("div",Ut,[u(h,{icon:"mdi:construction",class:"h-6 w-6 text-yellow-600 dark:text-yellow-300"})]),zt,Vt,e("div",Lt,[e("button",{onClick:t[13]||(t[13]=(...s)=>a.closeDevNotice&&a.closeDevNotice(...s)),class:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"}," ตกลง ")])])])])):g("",!0),r.showTestConfirmModal?(i(),d("div",Pt,[e("div",Ot,[e("div",Ht,[e("div",Qt,[u(h,{icon:"streamline:send-email-solid",class:"h-6 w-6 text-green-600 dark:text-green-300"})]),Ft,e("div",Jt,[e("p",Gt,' คุณต้องการส่งข้อความทดสอบจาก Bot "'+l((B=r.selectedBot)==null?void 0:B.name)+'" ใช่หรือไม่? ',1),e("div",Zt,[Kt,y(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=s=>r.testMessage=s),rows:"3",class:"w-full p-2 text-sm border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white",placeholder:"แก้ไขข้อความได้ที่นี่..."},null,512),[[x,r.testMessage]])])]),e("div",Wt,[e("button",{onClick:t[15]||(t[15]=(...s)=>a.closeTestConfirmModal&&a.closeTestConfirmModal(...s)),class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," ยกเลิก "),e("button",{onClick:t[16]||(t[16]=(...s)=>a.sendTestMessage&&a.sendTestMessage(...s)),class:"text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-green-600 dark:hover:bg-green-700 focus:outline-none dark:focus:ring-green-800"}," ส่งข้อความ ")])])])])):g("",!0)])])}const es=A(L,[["render",Xt]]);export{es as default};
